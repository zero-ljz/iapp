<!DOCTYPE html>
<html>
<head>
    <title>文本对比工具</title>
    <style>
        .editor {
            width: 50%;
            height: 100vh;
            overflow-y: auto;
            padding: 10px;
            box-sizing: border-box;
            display: inline-block;
            vertical-align: top;
        }

        .editor.left {
            background-color: #F9F9F9;
        }

        .editor.right {
            background-color: #F0F0F0;
        }

        .highlight {
            background-color: #FFFF99;
        }
    </style>
</head>
<body>
    <div class="editor left" contenteditable="true" oninput="compareText()">
        <h2>文本1</h2>
    </div>
    <div class="editor right" contenteditable="true" oninput="compareText()">
        <h2>文本2</h2>
    </div>

    <script>
        function compareText() {
            var leftEditor = document.querySelector('.editor.left');
            var rightEditor = document.querySelector('.editor.right');

            var leftText = leftEditor.innerText;
            var rightText = rightEditor.innerText;

            var diffResult = diffString(leftText, rightText);

            leftEditor.innerHTML = diffResult[0];
            rightEditor.innerHTML = diffResult[1];
        }

        function diffString(text1, text2) {
            var result = ['', ''];

            var minLength = Math.min(text1.length, text2.length);
            var i = 0;
            while (i < minLength && text1[i] === text2[i]) {
                result[0] += text1[i];
                result[1] += text2[i];
                i++;
            }

            result[0] += '<span class="highlight">';
            result[1] += '<span class="highlight">';

            while (i < text1.length) {
                result[0] += text1[i];
                i++;
            }

            while (i < text2.length) {
                result[1] += text2[i];
                i++;
            }

            result[0] += '</span>';
            result[1] += '</span>';

            return result;
        }
    </script>
</body>
</html>
